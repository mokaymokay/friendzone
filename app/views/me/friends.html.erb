<div id="friendzone" class="container-fluid">
  <div class="">
    <%# TODO: Add pluralize helper %>
    <p><%= @friends_with_tz.length %> friends in <%= @cities.length %> cities across <%= @friend_zones.length %> timezones</p>
  </div>
  <div class="row">
    <% @friend_zones.each do |fz| %>
      <div class="col-sm">
        <div class="friendzone-header">
          <h6><%= Time.parse(fz).strftime('%b %e') %></h6>
          <h6 class="text-lowercase"><%= Time.parse(fz).strftime('%l:%M %p') %></h6>
        </div>
        <%# Get array of friends whose current time matches column time %>
        <% friends_in_tz = @friends.select {|f| f.time_zone != nil && get_current_local_time(f.time_zone).strftime('%Y%m%d%H') == fz } %>
        <% friends_in_tz.each do |f| %>
          <img class="avatar rounded-circle" src="<%= asset_path (f.photo['prefix'] + '100x100' + f.photo['suffix']) %>" data-toggle="tooltip" data-placement="top" data-html="true" data-animation="true" title="<%= f.first_name %> <%= f.last_name %><br><%= f.home_city %>" alt="<%= f.first_name %> <%= f.last_name %>">
          <p><%#= get_current_local_time(f.time_zone).strftime('%b %e, %l:%M %p') %></p>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
